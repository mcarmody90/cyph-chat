{"version":3,"sources":["pages/home/home.component.jsx","services/firebase.js","components/chat/chat.component.jsx","helpers/auth.js","pages/signup/signup.component.jsx","pages/login/login.component.jsx","components/header/header.component.jsx","components/footer/footer.component.jsx","App.js","index.js"],"names":["HomePage","className","to","Component","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","db","database","Chat","props","state","user","currentUser","encryptedChats","chats","content","key","readError","writeError","loadingChats","handleChange","bind","handleSubmit","decipherText","myRef","React","createRef","this","setState","chatArea","current","ref","on","snapshot","forEach","snap","push","val","sort","a","b","timestamp","scrollBy","scrollHeight","error","message","e","target","value","name","length","event","preventDefault","email","split","CryptoJS","AES","encrypt","toString","Date","now","uid","newChats","JSON","parse","stringify","i","decrypt","enc","Utf8","console","log","d","getDate","getMonth","getFullYear","getHours","getMinutes","role","map","chat","formatTime","onSubmit","autoComplete","placeholder","onChange","type","onClick","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","signInWithGitHub","GithubAuthProvider","SignUp","password","googleSignIn","createUserWithEmailAndPassword","class","githubSignIn","Login","signInWithEmailAndPassword","Header","id","signOut","Footer","PrivateRoute","component","authenticated","rest","render","pathname","from","location","PublicRoute","App","loading","onAuthStateChanged","exact","path","Home","Signup","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cf031291.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './home.styles.scss';\r\n\r\nexport default class HomePage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"home__container\">\r\n        <section>\r\n            <div className=\"home\">\r\n              <h1 className=\"home__title\">Welcome to <span>CyphChat</span></h1>\r\n              <p className=\"home__subtitle\">A chat application that allows you to encrypt and decrypt messages</p>\r\n              <div className=\"home__links\">\r\n                <Link className=\"home__btn\" to=\"/signup\">Create New Account</Link>\r\n                <Link className=\"home__btn\" to=\"/login\">Login to Your Account</Link>\r\n              </div>\r\n            </div>\r\n        </section>\r\n      </div>\r\n    )\r\n  }\r\n}","import firebase from 'firebase';\r\n\r\nconst config = {\r\n      apiKey: \"AIzaSyCtKOUnzu4HecDcRmuhybgYsBMHL_KBOyE\",\r\n      authDomain: \"cyphchat.firebaseapp.com\",\r\n      databaseURL: \"https://cyphchat.firebaseio.com\",\r\n      projectId: \"cyphchat\",\r\n      storageBucket: \"cyphchat.appspot.com\",\r\n      messagingSenderId: \"375015518144\",\r\n      appId: \"1:375015518144:web:670e8d0cf8861542ca2225\",\r\n      measurementId: \"G-8K3LD12Q8B\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\nfirebase.analytics();\r\n\r\nexport const auth = firebase.auth;\r\nexport const db = firebase.database();\r\n\r\n\r\n// <!-- The core Firebase JS SDK is always required and must be listed first -->\r\n// <script src=\"https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js\"></script>\r\n\r\n// <!-- TODO: Add SDKs for Firebase products that you want to use\r\n//      https://firebase.google.com/docs/web/setup#available-libraries -->\r\n// <script src=\"https://www.gstatic.com/firebasejs/7.14.4/firebase-analytics.js\"></script>\r\n\r\n// <script>\r\n//   // Your web app's Firebase configuration\r\n//   var firebaseConfig = {\r\n//     apiKey: \"AIzaSyCtKOUnzu4HecDcRmuhybgYsBMHL_KBOyE\",\r\n//     authDomain: \"cyphchat.firebaseapp.com\",\r\n//     databaseURL: \"https://cyphchat.firebaseio.com\",\r\n//     projectId: \"cyphchat\",\r\n//     storageBucket: \"cyphchat.appspot.com\",\r\n//     messagingSenderId: \"375015518144\",\r\n//     appId: \"1:375015518144:web:670e8d0cf8861542ca2225\",\r\n//     measurementId: \"G-8K3LD12Q8B\"\r\n//   };\r\n//   // Initialize Firebase\r\n//   firebase.initializeApp(firebaseConfig);\r\n//   firebase.analytics();\r\n// </script>","import React, { Component } from \"react\";\r\nimport CryptoJS from 'crypto-js';\r\nimport { auth } from \"../../services/firebase\";\r\nimport { db } from \"../../services/firebase\";\r\nimport './chat.styles.scss';\r\n\r\nexport default class Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: auth().currentUser,\r\n      encryptedChats: [],\r\n      chats: [],\r\n      content: '',\r\n      key: '',\r\n      readError: null,\r\n      writeError: null,\r\n      loadingChats: false\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.decipherText = this.decipherText.bind(this);\r\n    this.myRef = React.createRef();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({ readError: null, loadingChats: true });\r\n    const chatArea = this.myRef.current;\r\n    try {\r\n      db.ref(\"chats\").on(\"value\", snapshot => {\r\n        let chats = [];\r\n        snapshot.forEach((snap) => {\r\n          chats.push(snap.val());\r\n        });\r\n        chats.sort(function (a, b) { return a.timestamp - b.timestamp })\r\n        this.setState({ \r\n          chats,\r\n          encryptedChats: chats \r\n        });\r\n        chatArea.scrollBy(0, chatArea.scrollHeight);\r\n        this.setState({ loadingChats: false });\r\n      });\r\n    } catch (error) {\r\n      this.setState({ readError: error.message, loadingChats: false });\r\n    }\r\n  }\r\n\r\n  handleChange(e) {\r\n    const { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value\r\n    }, () => this.state.key.length ? \r\n      null : \r\n      this.setState({ chats: this.state.encryptedChats }));\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    if(!this.state.content) {\r\n      return;\r\n    }\r\n    this.setState({ writeError: null });\r\n    const chatArea = this.myRef.current;\r\n    try {\r\n      await db.ref(\"chats\").push({\r\n        user: this.state.user.email.split(\"@\")[0],\r\n        content: this.state.key ? CryptoJS.AES.encrypt(this.state.content, this.state.key).toString() : this.state.content,\r\n        timestamp: Date.now(),\r\n        uid: this.state.user.uid\r\n      });\r\n      this.setState({ content: '' });\r\n      chatArea.scrollBy(0, chatArea.scrollHeight);\r\n    } catch (error) {\r\n      this.setState({ writeError: error.message });\r\n    }\r\n  }\r\n\r\n  decipherText(e) {\r\n    e.preventDefault();\r\n    const newChats = JSON.parse(JSON.stringify(this.state.encryptedChats));\r\n\r\n    if(this.state.key) {    \r\n      for(let i = 0; i < newChats.length; i++) {\r\n        ((CryptoJS.AES.decrypt(newChats[i].content, this.state.key)).toString(CryptoJS.enc.Utf8)) ? console.log('yes') : console.log('no');\r\n        if ((CryptoJS.AES.decrypt(newChats[i].content, this.state.key)).toString(CryptoJS.enc.Utf8)) {\r\n          newChats[i].content = (CryptoJS.AES.decrypt(newChats[i].content, this.state.key)).toString(CryptoJS.enc.Utf8);\r\n        }\r\n      }\r\n      this.setState({\r\n        chats: newChats\r\n      });\r\n    } else {\r\n      this.setState({\r\n        chats: this.state.encryptedChats\r\n      })\r\n    }\r\n  }\r\n\r\n  formatTime(timestamp) {\r\n    const d = new Date(timestamp);\r\n    const time = `${d.getDate()}/${(d.getMonth()+1)}/${d.getFullYear()} ${d.getHours()}:${d.getMinutes()}`;\r\n    return time;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='chat'>\r\n        <div className=\"chat__container\" ref={this.myRef}>\r\n          {/* loading indicator */}\r\n          {this.state.loadingChats ? <div className=\"spinner-border text-success\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div> : \"\"}\r\n          {/* chat area */}\r\n          {this.state.chats.map(chat => {\r\n            return <p key={chat.timestamp} className={\"chat__bubble \" + (this.state.user.uid === chat.uid ? \"current-user\" : \"\")}>\r\n              {chat.content}\r\n              <br />\r\n              <span className=\"chat__time float-right\">{this.formatTime(chat.timestamp)}</span>\r\n            </p>\r\n          })}\r\n        </div>\r\n        <form onSubmit={this.handleSubmit} autoComplete=\"off\" className=\"chat__form\">\r\n          {/* <span contentEditable className='chat__text' role='textbox' name='content' onChange={this.handleChange} value={this.state.content}></span> */}\r\n          <input placeholder=\"Type a message...\" className=\"chat__text\" name=\"content\" onChange={this.handleChange} value={this.state.content}></input>\r\n          <input placeholder=\"Enter a key...\" className=\"chat__key\" type='text' name='key' onChange={this.handleChange} value={this.state.key} />\r\n          <button type=\"submit\" className=\"chat__submit\"></button>\r\n          <button className='chat__key-submit' onClick={this.decipherText}></button>\r\n          {this.state.error ? <p className=\"text-danger\">{this.state.error}</p> : null}\r\n        </form>\r\n        <div className=\"chat__account\">\r\n          Logged in as: <strong className=\"chat__account-text\">{this.state.user.email}</strong>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import { auth } from '../services/firebase';\r\n\r\nexport function signup(email, password) {\r\n  return auth().createUserWithEmailAndPassword(email, password);\r\n};\r\n\r\nexport function signin(email, password) {\r\n  return auth().signInWithEmailAndPassword(email, password);\r\n};\r\n\r\nexport function signInWithGoogle() {\r\n  const provider = new auth.GoogleAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function signInWithGitHub() {\r\n  const provider = new auth.GithubAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function logout() {\r\n  return auth().signOut();\r\n}","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { signup, signInWithGoogle, signInWithGitHub } from '../../helpers/auth';\r\nimport './signup.styles.scss';\r\n\r\nexport default class SignUp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      email: '',\r\n      password: '',\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n  }\r\n  \r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  };\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: '' });\r\n    try {\r\n      await signup(this.state.email, this.state.password);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  };\r\n\r\n  async googleSignIn() {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  };\r\n\r\n  async githubSignIn() {\r\n    try {\r\n      await signInWithGitHub();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='signup'>\r\n        <form className='signup__form' onSubmit={this.handleSubmit}>\r\n          <h1 className='signup__title'>\r\n            Sign Up to{' '}\r\n            <Link className='signup__title-link' to=\"/\">CyphChat</Link>\r\n          </h1>\r\n          <p className=\"signup__subtitle\">Fill in the form below to create an account.</p>\r\n          <div>\r\n            <input className=\"signup__input\" placeholder=\"Email\" name=\"email\" type=\"email\" onChange={this.handleChange} value={this.state.email}></input>\r\n          </div>\r\n          <div>\r\n            <input className=\"signup__input\" placeholder=\"Password\" name=\"password\" onChange={this.handleChange} value={this.state.password} type=\"password\"></input>\r\n          </div>\r\n          <div>\r\n            {this.state.error ? <p>{this.state.error}</p> : null}\r\n            <button className=\"signup__button signup__button--submit\" type=\"submit\">Sign up</button>\r\n            <p>Or sign up with</p>\r\n            <button className=\"signup__button signup__button--google\" onClick={this.googleSignIn} type=\"button\">\r\n              <i class=\"fab fa-google\"></i> Google\r\n            </button>\r\n            <button className=\"signup__button signup__button--github\" type=\"button\" onClick={this.githubSignIn}>\r\n              <i class=\"fab fa-github\"></i> GitHub\r\n            </button>\r\n          </div>\r\n          <hr></hr>\r\n          <p>Already have an account? <Link className='signup__link' to=\"/login\">Login</Link></p>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signin, signInWithGoogle, signInWithGitHub } from \"../../helpers/auth\";\r\nimport './login.styles.scss';\r\n\r\nexport default class Login extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      error: null,\r\n      email: \"\",\r\n      password: \"\"\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.githubSignIn = this.githubSignIn.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: \"\" });\r\n    try {\r\n      await signin(this.state.email, this.state.password);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async googleSignIn() {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async githubSignIn() {\r\n    try {\r\n      await signInWithGitHub();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login\">\r\n        <form\r\n          className=\"login__form\"\r\n          autoComplete=\"off\"\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <h1 className='login__title'>\r\n            Login to{' '}\r\n            <Link className='login__title-link' to=\"/\">CyphChat</Link>\r\n          </h1>\r\n          <p className=\"login__subtitle\">\r\n            Fill in the form below to login to your account.\r\n          </p>\r\n          <div className=\"login__form-group\">\r\n            <input\r\n              className=\"login__input\"\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n          </div>\r\n          <div className=\"login__form-group\">\r\n            <input\r\n              className=\"login__input\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={this.handleChange}\r\n              value={this.state.password}\r\n              type=\"password\"\r\n            />\r\n          </div>\r\n          <div className=\"login__form-group\">\r\n            {this.state.error ? (\r\n              <p className=\"text-danger\">{this.state.error}</p>\r\n            ) : null}\r\n            <button className=\"login__button login__button--submit\" type=\"submit\">Login</button>\r\n          </div>\r\n          <p>Or log in with</p>\r\n          <button className=\"login__button login__button--google\" type=\"button\" onClick={this.googleSignIn}>\r\n            <i class=\"fab fa-google\"></i> Google\r\n          </button>\r\n          <button className=\"login__button login__button--github\" type=\"button\" onClick={this.githubSignIn}>\r\n            <i class=\"fab fa-github\"></i> GitHub\r\n          </button>\r\n          <hr></hr>\r\n          <p>\r\n            Don't have an account? <Link className='login__link' to=\"/signup\">Sign up</Link>\r\n          </p>\r\n        </form>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { auth } from '../../services/firebase';\r\nimport './header.styles.scss';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header>\r\n      <nav className=\"header\">\r\n        <Link className=\"header__brand\" to=\"/\">CyphChat</Link>\r\n        {/* <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button> */}\r\n        <div className=\"header__links\" id=\"navbarNavAltMarkup\">\r\n          {auth().currentUser\r\n            ? <div className=\"header__item\">\r\n                <Link className=\"header__link\" to=\"/chat\">Chat</Link>\r\n              <button className=\"header__link\" onClick={() => auth().signOut()}>Logout</button>\r\n            </div>\r\n            : <div className=\"header__item\">\r\n                <Link className=\"header__link\" to=\"/login\">Sign In</Link>\r\n                <Link className=\"header__link\" to=\"/signup\">Sign Up</Link>\r\n            </div>}\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport './footer.styles.scss';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer__container\">\r\n      <div className=\"footer\">\r\n        <p>&copy; CyphChat 2020.</p>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","  \nimport React, { Component } from \"react\";\nimport {\n  Route,\n  BrowserRouter as Router,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport Home from './pages/home/home.component';\nimport Chat from \"./components/chat/chat.component\";\nimport Signup from \"./pages/signup/signup.component\";\nimport Login from \"./pages/login/login.component\";\nimport Header from './components/header/header.component';\nimport Footer from './components/footer/footer.component';\nimport { auth } from \"./services/firebase\";\nimport './styles.css';\n\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        authenticated === true ? (\n          <Component {...props} />\n        ) : (\n            <Redirect\n              to={{ pathname: \"/login\", state: { from: props.location } }}\n            />\n          )\n      }\n    />\n  );\n}\n\nfunction PublicRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        authenticated === false ? (\n          <Component {...props} />\n        ) : (\n            <Redirect to=\"/chat\" />\n          )\n      }\n    />\n  );\n}\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      authenticated: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          authenticated: true,\n          loading: false\n        });\n      } else {\n        this.setState({\n          authenticated: false,\n          loading: false\n        });\n      }\n    });\n  }\n\n  render() {\n    return this.state.loading === true ? (\n      <div className=\"spinner-border text-success\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    ) : (\n        <Router>\n          <Header />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <PrivateRoute\n              path=\"/chat\"\n              authenticated={this.state.authenticated}\n              component={Chat}\n            />\n            <PublicRoute\n              path=\"/signup\"\n              authenticated={this.state.authenticated}\n              component={Signup}\n            />\n            <PublicRoute\n              path=\"/login\"\n              authenticated={this.state.authenticated}\n              component={Login}\n            />\n          </Switch>\n          <Footer />\n        </Router>\n      );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}